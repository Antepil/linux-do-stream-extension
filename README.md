# Linux.do 主题流 Chrome 插件

一个优雅的 Chrome 浏览器扩展，在侧边栏实时推送 Linux.do 社区的最新主题标题，让你不错过任何精彩讨论。

## 功能特性

本插件为 Linux.do 社区用户提供了便捷的主题订阅体验。通过在浏览器侧边栏展示实时更新的主题流，用户可以随时掌握社区动态。插件采用流式推送设计，新主题会以动画形式逐个呈现，带来流畅的视觉体验。

核心功能包括自动定时检测新主题、侧边栏流式展示、一键刷新、主题详情跳转等。插件会每分钟自动检查一次 Linux.do 的最新主题，当发现新内容时会立即在侧边栏以动画形式推送。每个主题卡片都包含标题、发布时间、回复数和浏览数等关键信息，点击即可跳转到主题详情页。

## 安装方法

### 方式一：开发者模式安装（推荐）

由于本插件尚未发布到 Chrome Web Store，需要通过开发者模式手动安装。具体步骤如下：

首先，解压下载的 `linux-do-stream-extension.zip` 文件到任意目录。然后打开 Chrome 浏览器，在地址栏输入 `chrome://extensions/` 并回车，进入扩展程序管理页面。

在页面右上角找到并启用"开发者模式"开关。启用后，页面左上角会出现三个新按钮，点击"加载已解压的扩展程序"按钮。在弹出的文件选择对话框中，选择刚才解压的插件目录（包含 manifest.json 文件的目录），点击"选择文件夹"完成安装。

安装成功后，你会在扩展程序列表中看到"Linux.do 主题流"插件，浏览器工具栏也会出现插件图标。

### 方式二：拖放安装

如果浏览器支持，也可以直接将 `linux-do-stream-extension.zip` 文件拖放到 `chrome://extensions/` 页面进行安装。但部分 Chrome 版本可能不支持此方式，建议使用方式一。

## 使用指南

### 打开侧边栏

安装完成后，点击浏览器工具栏中的插件图标（紫色渐变背景的企鹅图标），即可在浏览器右侧打开主题流侧边栏。侧边栏会自动加载最新的主题列表。

### 查看主题流

侧边栏顶部显示插件状态和最后更新时间。主题以卡片形式从上到下排列，最新的主题显示在最上方。每个主题卡片包含：

- **标题**：点击可跳转到 Linux.do 对应的主题详情页
- **时间标签**：显示主题发布或最后回复的相对时间
- **"新"标签**：标识新推送的主题
- **互动数据**：显示回复数（💬）和浏览数（👁️）

### 手动刷新

如果想立即查看最新主题，可以点击侧边栏顶部的刷新按钮（🔄图标）。刷新按钮会旋转动画提示正在刷新，完成后会自动加载新主题。

### 自动更新

插件会在后台每分钟自动检查一次新主题。当发现新主题时，会自动推送到侧边栏顶部，并伴随滑入动画效果。状态指示灯会闪烁提示有新内容到达。

## 技术实现

### 架构设计

本插件基于 Chrome Extension Manifest V3 规范开发，采用前后端分离的架构设计。后台服务（Service Worker）负责定时任务和数据获取，侧边栏页面负责用户交互和内容展示，内容脚本负责从 Linux.do 页面提取数据作为备用方案。

### 数据获取

插件通过两种方式获取 Linux.do 的主题数据。主要方式是直接调用 Linux.do 的 JSON API（`https://linux.do/latest.json`），该接口返回最新的 30 个主题及其详细信息。备用方式是当 API 调用受到 Cloudflare 保护限制时，通过内容脚本从用户访问的 Linux.do 页面中提取主题数据。

### 流式推送

新主题的流式推送效果通过 CSS 动画和 JavaScript 定时器实现。当检测到新主题时，插件会按顺序逐个将主题卡片插入侧边栏顶部，每个卡片间隔 300 毫秒，并伴随滑入动画。这种设计既保证了视觉流畅性，又避免了大量内容同时出现造成的信息过载。

### 数据存储

插件使用 Chrome Storage API 在本地存储主题数据和状态信息。存储的数据包括最近 100 个主题的完整信息、上次检查时的主题 ID 列表（用于检测新主题）、最后更新时间等。这样即使浏览器重启，也能快速恢复之前的主题列表。

## 文件结构

```
linux-do-stream-extension/
├── manifest.json          # 插件配置文件
├── background.js          # 后台服务脚本
├── content.js            # 内容脚本（页面数据提取）
├── sidepanel.html        # 侧边栏页面结构
├── sidepanel.js          # 侧边栏交互逻辑
├── styles.css            # 样式表
├── icon16.png            # 16x16 图标
├── icon48.png            # 48x48 图标
└── icon128.png           # 128x128 图标
```

## 权限说明

本插件申请了以下权限，所有权限均用于实现核心功能，不会收集或上传任何用户数据：

- **sidePanel**：用于在浏览器侧边栏显示主题流界面
- **alarms**：用于设置定时任务，每分钟自动检查新主题
- **storage**：用于在本地存储主题数据和插件状态
- **host_permissions (linux.do)**：用于访问 Linux.do 的 API 和页面数据

## 常见问题

**Q: 为什么有时候看不到新主题推送？**

A: 可能有以下几种原因。首先，Linux.do 可能确实没有新主题发布。其次，如果 API 调用受到 Cloudflare 保护限制，插件会尝试从页面提取数据，这需要你在浏览器中打开过 Linux.do 网站。最后，可以尝试点击刷新按钮手动触发更新。

**Q: 插件会消耗很多资源吗？**

A: 不会。插件采用轻量级设计，后台服务仅在每分钟检查一次时短暂运行，平时处于休眠状态。侧边栏页面也经过优化，只在打开时才加载和渲染内容。

**Q: 可以调整检查频率吗？**

A: 当前版本固定为每分钟检查一次。如果需要自定义频率，可以修改 `background.js` 中的 `FETCH_INTERVAL` 常量（单位：分钟），然后重新加载插件。

**Q: 主题数据会保存多久？**

A: 插件最多保存最近 100 个主题的数据，数据存储在浏览器本地，不会上传到任何服务器。清除浏览器数据或卸载插件时，这些数据会被删除。

**Q: 为什么有些主题显示的时间不准确？**

A: 当插件通过页面提取数据（而非 API）时，由于页面上可能没有完整的时间信息，插件会使用当前时间作为替代。这不影响主题的实际发布时间，只是显示上的差异。

## 更新日志

### v1.0.0 (2025-12-30)

- 首次发布
- 实现侧边栏主题流展示
- 实现定时自动检查新主题
- 实现流式推送动画效果
- 实现手动刷新功能
- 实现双重数据获取方案（API + 页面提取）

## 开发者信息

本插件为开源项目，欢迎提交问题反馈和功能建议。

## 许可证

MIT License

---

**享受来自 Linux.do 社区的精彩内容！** 🐧✨
